Content-type: text/html

<HTML><HEAD><TITLE>Manpage of RZSCONTROL</TITLE>
</HEAD><BODY>
<H1>RZSCONTROL</H1>
Section:  (1)<BR>Updated: 05/19/2010<BR><A HREF="#index">Index</A>
<A HREF="http://localhost/cgi-bin/man/man2html">Return to Main Contents</A><HR>











<A NAME="lbAB">&nbsp;</A>
<H2>NAME</H2>

rzscontrol - control ramzswap devices
<A NAME="lbAC">&nbsp;</A>
<H2>SYNOPSIS</H2>

<DL COMPACT>
<DT>
<B>rzscontrol</B> {ramzswap&nbsp;device} [-d|--disksize_kb=&lt;value&gt;] [-i|--init] [-r|--reset] [-s|--stats] [-v|--verbose] [-h|--help]
</DL>
<A NAME="lbAD">&nbsp;</A>
<H2>DESCRIPTION</H2>

<P>

<DD>The ramzswap kernel module creates multiple ramzswap devices, equal to num_devices parameter. With rzscontrol, you can control each of these devices.
<P>

This is how you use a ramzswap device (/dev/ramzswapX):
<P>

- Set [disksize] parameter (see OPTIONS and EXAMPLES).
<P>

- Issue init once these parameters are set: rzscontrol /dev/ramzswapX --init.
<P>

- swapon /dev/ramzswapX (where X is ramzswap device id: 0, 1, 2... num_devices-1).
<P>

- When you are done with this swap: swapoff /dev/ramzswapX. NOTE: swapoff will not free any compressed pages.
<P>

- After swapoff, issue reset: rzscontrol /dev/ramzswapX --reset. This will free all metadata and compressed pages.
<A NAME="lbAE">&nbsp;</A>
<H2>OPTIONS</H2>

<P>

<B>-d, --disksize_kb</B>
<DL COMPACT><DT><DD>
Specify ramzswap disk size (in KB). This is the limit on number of (uncompressed) pages that can be stored in this device. Default: 25% of RAM
</DL>

<P>

<B>-i, --init</B>
<DL COMPACT><DT><DD>
Initialize given ramzswap device. It causes allocation of metadata for given ramzswap device and makes it ready to receive swap requests. Use
<B><A HREF="http://localhost/cgi-bin/man/man2html?8+swapon">swapon</A></B>(8)
to start using this device as swap.
</DL>

<P>

<B>-r, --reset</B>
<DL COMPACT><DT><DD>
Resets given ramzswap device. It causes deallocation of metadata and any compressed pages for given ramzswap device. If the device is currently active, use
<B><A HREF="http://localhost/cgi-bin/man/man2html?8+swapoff">swapoff</A></B>(8)
before issuing reset (otherwise -EBUSY error is returned).
</DL>

<P>

<B>-s, --stats</B>
<DL COMPACT><DT><DD>
Show stats for given ramzswap device. If the ramzswap kernel module was compiled without STATS support, then most of the stats will be shown as 0.
</DL>

<P>

<B>-v, --verbose</B>
<DL COMPACT><DT><DD>
Show verbose output from rzscontrol.
</DL>

<P>

<B>-h, --help</B>
<DL COMPACT><DT><DD>
Shows usage information and some examples.
</DL>

<A NAME="lbAF">&nbsp;</A>
<H2>EXAMPLES</H2>

<P>

Following shows a typical sequence of steps for using ramzswap. Initialization can be done with many variations of configuration parameters as shown below.
<P>

Load Module:
<P>
<DL COMPACT><DT><DD>



<PRE>
    insmod ramzswap.ko num_devices=4 # creates 4 uninitialized devices: /dev/ramzswap{0,1,2,3}
    
</PRE>

</DL>




<P>

Initialize:
<P>
<DL COMPACT><DT><DD>



<PRE>
    rzscontrol /dev/ramzswap0 --init # uses default value of disksize_kb
    rzscontrol /dev/ramzswap1 --disksize_kb=10240 --init
    
</PRE>

</DL>




<P>

Activate:
<P>
<DL COMPACT><DT><DD>



<PRE>
    swapon /dev/ramzswap1 # or any other initialized ramzswap device
    
</PRE>

</DL>




<P>

Stats:
<P>
<DL COMPACT><DT><DD>



<PRE>
    rzscontrol /dev/ramzswap1 --stats
    
</PRE>

</DL>




<P>

Deactivate:
<P>
<DL COMPACT><DT><DD>



<PRE>
    swapoff /dev/ramzswap1
    
</PRE>

</DL>




<P>

Reset:
<P>
<DL COMPACT><DT><DD>



<PRE>
    rzscontrol /dev/ramzswap1 --reset
    
</PRE>

</DL>




<P>

Unload Module:
<P>
<DL COMPACT><DT><DD>



<PRE>
    rmmod ramzswap.ko
    
</PRE>

</DL>




<P>

NOTE: ramzswap parameters cannot be changed once the device is initialized. It has to be reset before new parameters can be used.
<A NAME="lbAG">&nbsp;</A>
<H2>SEE ALSO</H2>

<P>

<P>
<B><A HREF="http://localhost/cgi-bin/man/man2html?8+mkswap">mkswap</A></B>(8),
<B><A HREF="http://localhost/cgi-bin/man/man2html?8+swapon">swapon</A></B>(8),
<B><A HREF="http://localhost/cgi-bin/man/man2html?8+swapoff">swapoff</A></B>(8)
<A NAME="lbAH">&nbsp;</A>
<H2>AUTHOR</H2>

<P>

<B>Nitin Gupta</B> &lt;<A HREF="mailto:ngupta@vflare.org">ngupta@vflare.org</A>&gt;
<DL COMPACT><DT><DD>
Developer
</DL>

<P>

<HR>
<A NAME="index">&nbsp;</A><H2>Index</H2>
<DL>
<DT><A HREF="#lbAB">NAME</A><DD>
<DT><A HREF="#lbAC">SYNOPSIS</A><DD>
<DT><A HREF="#lbAD">DESCRIPTION</A><DD>
<DT><A HREF="#lbAE">OPTIONS</A><DD>
<DT><A HREF="#lbAF">EXAMPLES</A><DD>
<DT><A HREF="#lbAG">SEE ALSO</A><DD>
<DT><A HREF="#lbAH">AUTHOR</A><DD>
</DL>
<HR>
This document was created by
<A HREF="http://localhost/cgi-bin/man/man2html">man2html</A>,
using the manual pages.<BR>
Time: 02:20:56 GMT, May 19, 2010
</BODY>
</HTML>
